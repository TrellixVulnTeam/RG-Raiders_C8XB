import e,{useState as n,createElement as t}from"react";import r from"react-ssr-prepass";import{createClient as i,ssrExchange as o,dedupExchange as u,cacheExchange as a,fetchExchange as l,Provider as s}from"urql";function p(){return(p=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var f,c=null;function v(){c=null}function d(e,n){var t="undefined"==typeof window;return!t&&c||((c=i(p({},e,{suspense:n&&(t||e.suspense)}))).toJSON=function(){return null}),c}function h(i,c){return c||(c={}),function(h){var m=Boolean((h.getInitialProps||c.ssr)&&!c.neverSuspend),g=function(r){var c=r.pageProps,g=r.urqlClient,P=r.urqlState,q=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===n.indexOf(r)&&(t[r]=e[r]);return t}(r,["pageProps","urqlClient","urqlState"]),y=n(0),C=c&&c.urqlState||P,w=e.useMemo((function(){if(g)return g;f&&"undefined"!=typeof window?f&&"undefined"!=typeof window&&f.restoreData(C):f=o({initialState:C,isClient:!0});var e=i(f);return e.exchanges||(e.exchanges=[u,a,f,l]),d(e,m)}),[g,C,y[0]]);return t(s,{value:w},t(h,p({},q,{pageProps:c,urqlClient:w,resetUrqlClient:function(){v(),f=o({initialState:void 0}),y[1](y[0]+1)}})))};return g.displayName="withUrqlClient("+(h.displayName||h.name||"Component")+")",(h.getInitialProps||c.ssr)&&(g.getInitialProps=function(e){try{function n(){function e(){return p({},q,{urqlState:m?m.extractData():void 0,urqlClient:P})}if("undefined"!=typeof window)return p({},q,{urqlClient:P});var n=p({},q,{urqlClient:P}),i=f?n:{pageProps:n};const o=function(){if(!c.neverSuspend)return Promise.resolve(r(t(s,i))).then((function(){}))}();return o&&o.then?o.then(e):e()}var s=e.AppTree,f=!!e.Component,v=f?e.ctx:e,m=o({initialState:void 0}),g=i(m,v);g.exchanges||(g.exchanges=[u,a,m,l]);var P=d(g,!c.neverSuspend);P&&(v.urqlClient=P);var q={};const y=function(){if(h.getInitialProps)return Promise.resolve(h.getInitialProps(e)).then((function(e){q=e}))}();return Promise.resolve(y&&y.then?y.then(n):n())}catch(e){return Promise.reject(e)}}),g}}export{d as initUrqlClient,h as withUrqlClient};
//# sourceMappingURL=next-urql.min.es.js.map
